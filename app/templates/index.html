{% extends 'base.html' %}

{% block conteudo %}

<div class="container mt-3">
  {% if form.is_submitted() and form.validate() %}
    <div class="alert alert-success">                                                                                                     
      Tarefa adicionada com sucesso!
      <br>
      Nome: {{ form.nome.data }}
      <br>
      Hora: {{ form.hora.data }}
    </div>
  {% endif %}
</div>
  <form action="{{ url_for('index') }}" method="post" class="formulario mx-auto p-4" style="max-width: 400px;">
    <h1 class="text-primary">Adicionar Tarefas</h1>
    <div class="form-group">
      <label class="text-light">Nome</label>
      {{ form.nome(class="form-control bg-transparent text-light border-top-0 border-end-0 border-start-0", placeholder="nome da tarefa") }}
    </div>
    <div class="form-group mt-3">
      <label class="text-light">Hora</label>
      {{ form.hora(class="form-control bg-transparent text-light border-top-0 border-end-0 border-start-0", placeholder="horario da tarefa") }}
    </div>
    {{ form.csrf_token }}
    <div class="input-group mt-3">
      <button type="submit" class="btn btn-primary btn-block w-100">adicionar</button>
    </div>
  </form>
  <div class="mt-3">
    {% if tarefas %}
      <h2 class="text-center text-primary">Lista de Tarefas</h2>
    {% else %}
      <p class="text-center text-primary">Não há tarefas na lista</p>
    {% endif %}
    {% for tarefa in tarefas %}
      <div class="alert alert-info">
        Nome: {{ tarefa.nome }}
        <br>
        Hora: {{ tarefa.hora }}h
        <div>
          <a href="{{ url_for('editar_tarefa', tarefa_id=tarefa.id) }}" class="btn btn-primary btn-block mt-3">Editar</a>
          <form action="{{ url_for('deletar_tarefa', tarefa_id=tarefa.id) }}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-danger btn-block mt-3">Excluir</button>
          </form>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% endblock %}
